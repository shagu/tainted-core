# Contributing

In order for us to keep track of SQL fixes we prefix our SQL files with a date format YYYY_MM_DD followed by the table the update is most likely to affect.
In some cases, where an update fixes a quest or zone, it is okay to put that instead.

 - **A query must always end in a semi-colon( ; )**
 - **Supply names where applicable**
 - **DELETE before INSERT & Use exact fields**
 - **If you're referencing a value more than 3 times, use a variable**
 - **Comments and Author references must be provided where applicable**
 - If the last line of the file is a comment - add a new line after it
   *(because when concatenating files the first statement after your file will not be execued)*

**Wrong:**

    INSERT INTO spell_group VALUES (1, 1239)
    
**Correct:**

    -- Add spell 1239 (Example Spell) to spell group 1
    DELETE FROM `spell_group` WHERE `id` = 1 AND `spell_id` = 1239;
    INSERT INTO spell_group (`id`,`spell_id`) VALUES
    (1, 1239); -- (Example Spell)

# Building Releases

The following has been used to create database releases. Make sure to wipe the database first and apply every update correctly.

    mysqldump -u"oregon" -p"oregon" world $(mysql -u"oregon" -p"oregon" -D world -Bse "SHOW TABLES" | grep -v "^locales_") > world.sql
    mysqldump -u"oregon" -p"oregon" world $(mysql -u"oregon" -p"oregon" -D world -Bse "SHOW TABLES" | grep "^locales_") > world_locales.sql

    mysqldump -u"oregon" -p"oregon" characters > characters.sql
    mysqldump -u"oregon" -p"oregon" realmd > realmd.sql

    for i in *.sql; do
        sed -i '1,5d' $i
        sed -i '/-- Dump completed/d' $i
        sed -i '1i-- to the updates/ folder.' $i
        sed -i '1i-- create and update query and place it' $i
        sed -i '1i-- Please do not edit this file directly,' $i
        sed -i '1i\\' $i
        sed -i '1i-- ---------------------------- --' $i
        sed -i '1i-- Tainted Core Realmd Database --' $i
        sed -i '1i-- ---------------------------- --' $i
    done
